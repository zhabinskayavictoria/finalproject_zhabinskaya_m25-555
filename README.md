# ValutaTrade Hub üí•
–ö–æ–Ω—Å–æ–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –∏ —Å–∏–º—É–ª—è—Ü–∏–∏ —Ç–æ—Ä–≥–æ–≤–ª–∏ –≤–∞–ª—é—Ç–∞–º–∏. –û–Ω–æ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è, —É–ø—Ä–∞–≤–ª—è—Ç—å –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–º –ø–æ—Ä—Ç—Ñ–µ–ª–µ–º —Ñ–∏–∞—Ç–Ω—ã—Ö –∏ –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç, —Å–æ–≤–µ—Ä—à–∞—Ç—å —Å–¥–µ–ª–∫–∏ –ø–æ –ø–æ–∫—É–ø–∫–µ/–ø—Ä–æ–¥–∞–∂–µ, –∞ —Ç–∞–∫–∂–µ –æ—Ç—Å–ª–µ–∂–∏–≤–∞—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏.

**–ü—Ä–æ–µ–∫—Ç —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ –¥–≤—É—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤:**
- *Core Service* - –≥–ª–∞–≤–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º (CLI)
- *Parser Service* - —Å–µ—Ä–≤–∏—Å –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–∫—Ç—É–∞–ª—å–Ω—ã—Ö –∫—É—Ä—Å–æ–≤ –≤–∞–ª—é—Ç –∏–∑ –≤–Ω–µ—à–Ω–∏—Ö API

**–ò—Å—Ç–æ—á–Ω–∏–∫–∏ –¥–∞–Ω–Ω—ã—Ö**
- CoinGecko API - –∫—É—Ä—Å—ã –∫—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç
- ExchangeRate-API - –∫—É—Ä—Å—ã —Ñ–∏–∞—Ç–Ω—ã—Ö –≤–∞–ª—é—Ç

**–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ –≤–∞–ª—é—Ç—ã**
- –§–∏–∞—Ç–Ω—ã–µ –≤–∞–ª—é—Ç—ã - USD (–¥–æ–ª–ª–∞—Ä –°–®–ê), EUR (–µ–≤—Ä–æ), GBP (—Ñ—É–Ω—Ç —Å—Ç–µ—Ä–ª–∏–Ω–≥–æ–≤), RUB (—Ä–æ—Å—Å–∏–π—Å–∫–∏–π —Ä—É–±–ª—å), JPY (—è–ø–æ–Ω—Å–∫–∞—è –∏–µ–Ω–∞), CNY(–∫–∏—Ç–∞–π—Å–∫–∏–π —é–∞–Ω—å)
- –ö—Ä–∏–ø—Ç–æ–≤–∞–ª—é—Ç—ã - BTC (Bitcoin), ETH (Ethereum), SOL (Solana), ADA (Cardano), DOT (Polkadot)

# :one: –£—Å—Ç–∞–Ω–æ–≤–∫–∞
***–í–ê–ñ–ù–û:*** –ü–æ–ª—É—á–∏—Ç–µ –±–µ—Å–ø–ª–∞—Ç–Ω—ã–π API-–∫–ª—é—á, –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–≤—à–∏—Å—å –Ω–∞ https://www.exchangerate-api.com/ 

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª .env –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞, –¥–æ–±–∞–≤—å—Ç–µ –∫–ª—é—á –≤ —Ñ–∞–π–ª:
```
EXCHANGERATE_API_KEY=–≤–∞—à_–∫–ª—é—á
```
### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —á–µ—Ä–µ–∑ Poetry
```
poetry install
```
### –ò–ª–∏ —á–µ—Ä–µ–∑ Makefile
```
make install
```

# :two: –ó–∞–ø—É—Å–∫
### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ Poetry
```
poetry run project
```
### –ò–ª–∏ —á–µ—Ä–µ–∑ Makefile
```
make project
```
### –î—Ä—É–≥–æ–µ
```
# –°–±–æ—Ä–∫–∞ –ø–∞–∫–µ—Ç–∞
make build

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–¥–∞ (–ª–∏–Ω—Ç–µ—Ä)
make lint

# –ü—É–±–ª–∏–∫–∞—Ü–∏—è –ø–∞–∫–µ—Ç–∞ 
make publish

# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–æ–±—Ä–∞–Ω–Ω–æ–≥–æ –ø–∞–∫–µ—Ç–∞
make package-install
```
# –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞ ‚öôÔ∏è 
```
finalproject_zhabinskaya_m25-555/
‚îÇ  
‚îú‚îÄ‚îÄ data/
‚îÇ    ‚îú‚îÄ‚îÄ users.json          
‚îÇ    ‚îú‚îÄ‚îÄ portfolios.json       
‚îÇ    ‚îú‚îÄ‚îÄ rates.json               
‚îÇ    ‚îî‚îÄ‚îÄ exchange_rates.json                 
‚îú‚îÄ‚îÄ valutatrade_hub/
‚îÇ    ‚îú‚îÄ‚îÄ __init__.py
‚îÇ    ‚îú‚îÄ‚îÄ logging_config.py         
‚îÇ    ‚îú‚îÄ‚îÄ decorators.py            
‚îÇ    ‚îú‚îÄ‚îÄ core/
‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ __init__.py
‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ currencies.py         
‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ exceptions.py         
‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ models.py           
‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ usecases.py          
‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ utils.py             
‚îÇ    ‚îú‚îÄ‚îÄ infra/
‚îÇ    ‚îÇ    ‚îú‚îÄ __init__.py
‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ settings.py           
‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ database.py          
‚îÇ    ‚îú‚îÄ‚îÄ parser_service/
‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ __init__.py
‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ config.py            
‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ api_clients.py       
‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ updater.py           
‚îÇ    ‚îÇ    ‚îú‚îÄ‚îÄ storage.py            
‚îÇ    ‚îÇ    ‚îî‚îÄ‚îÄ scheduler.py          
‚îÇ    ‚îî‚îÄ‚îÄ cli/
‚îÇ         ‚îú‚îÄ __init__.py
‚îÇ         ‚îî‚îÄ interface.py     
‚îÇ
‚îú‚îÄ‚îÄ main.py
‚îú‚îÄ‚îÄ Makefile
‚îú‚îÄ‚îÄ poetry.lock
‚îú‚îÄ‚îÄ pyproject.toml
‚îú‚îÄ‚îÄ README.md
‚îî‚îÄ‚îÄ .gitignore
```
# –î–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã :speech_balloon:
| –ö–æ–º–∞–Ω–¥–∞ | –û–ø–∏—Å–∞–Ω–∏–µ | 
|----------------|---------|
|register --username \<name> --password \<pass> |–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
|login --username \<name> --password \<pass> |–í–æ–π—Ç–∏ –≤ —Å–∏—Å—Ç–µ–º—É |
|show-portfolio [--base \<currency>] |–ü–æ–∫–∞–∑–∞—Ç—å –ø–æ—Ä—Ç—Ñ–µ–ª—å |
|deposit --amount \<sum> |–ü–æ–ø–æ–ª–Ω–∏—Ç—å USD –∫–æ—à–µ–ª–µ–∫ |
|buy --currency \<code> --amount \<sum> |–ö—É–ø–∏—Ç—å –≤–∞–ª—é—Ç—É –∑–∞ USD |
|sell --currency \<code> --amount \<sum> |–ü—Ä–æ–¥–∞—Ç—å –≤–∞–ª—é—Ç—É –∑–∞ USD |
|get-rate --from \<code> --to \<code> |–ü–æ–ª—É—á–∏—Ç—å –∫—É—Ä—Å –º–µ–∂–¥—É –≤–∞–ª—é—Ç–∞–º–∏ |
|update-rates [--source \<source>] |–û–±–Ω–æ–≤–∏—Ç—å –∫—É—Ä—Å—ã –≤–∞–ª—é—Ç |
|show-rates [--currency \<code>] [--top \<N>] |–ü–æ–∫–∞–∑–∞—Ç—å –∞–∫—Ç—É–∞–ª—å–Ω—ã–µ –∫—É—Ä—Å—ã |
|help |–ü–æ–∫–∞–∑–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã |
|exit |–í—ã–π—Ç–∏ –∏–∑ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è|


# –°–∏—Å—Ç–µ–º–∞ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏—è ‚ö°Ô∏è
**–ö—ç—à –∫—É—Ä—Å–æ–≤:** `data/rates.json`

**TTL: 5 –º–∏–Ω—É—Ç** (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç—Å—è)

**–ò—Å—Ç–æ—Ä–∏—è –∫—É—Ä—Å–æ–≤:** `data/exchange_rates.json`

–ü—Ä–∏ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–∏ TTL —Å–∏—Å—Ç–µ–º–∞ –ø—Ä–µ–¥–ª–æ–∂–∏—Ç –æ–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥–æ–π `update-rates`


# –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ ‚ö°Ô∏è 
–û–ø–µ—Ä–∞—Ü–∏–∏ `buy/sell/register/login` –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –¥–µ–∫–æ—Ä–∞—Ç–æ—Ä–∞ `@log_action`. –õ–æ–≥–∏ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –≤ —Ñ–∞–π–ª –∏ –≤–∫–ª—é—á–∞—é—Ç:

- –í—Ä–µ–º–µ–Ω–Ω—É—é –º–µ—Ç–∫—É

- –î–µ–π—Å—Ç–≤–∏–µ (BUY/SELL/REGISTER/LOGIN)

- –ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è

- –ö–æ–¥ –≤–∞–ª—é—Ç—ã, —Å—É–º–º—É, –∫—É—Ä—Å (–µ—Å–ª–∏ –ø—Ä–∏–º–µ–Ω–∏–º–æ)

- –†–µ–∑—É–ª—å—Ç–∞—Ç –æ–ø–µ—Ä–∞—Ü–∏–∏ (OK, ERROR) - –∞ —Ç–∞–∫–∂–µ —Ç–∏–ø –∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—à–∏–±–∫–∏, –µ—Å–ª–∏ `result=ERROR`

–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤–µ–¥–µ—Ç –¥–≤–∞ —Ç–∏–ø–∞ –ª–æ–≥–æ–≤:

- –î–µ–π—Å—Ç–≤–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: `logs/actions.log`

- –†–∞–±–æ—Ç–∞ –ø–∞—Ä—Å–µ—Ä–∞: `logs/parser.log`

# –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è —Ä–∞–±–æ—Ç—ã:
–ü–æ–∫–∞–∑–∞–Ω –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Ä–∞–±–æ—Ç—ã –ø—Ä–æ–≥—Ä–∞–º–º—ã, –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã `(register, login, deposit, buy/sell, show-portfolio, get-rate, update-rates, show-rates, help, exit)`, –∞ —Ç–∞–∫–∂–µ –æ–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫, –ª–æ–≥–∏.

[–¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è](https://asciinema.org/a/0jvcy6AWh4YFNEtVmv4l9S3pY)

[![asciicast](https://asciinema.org/a/0jvcy6AWh4YFNEtVmv4l9S3pY.svg)](https://asciinema.org/a/0jvcy6AWh4YFNEtVmv4l9S3pY)



